/* 
 * heMenu v1.0.6
 * https://github.com/meceware/heMenu 
 * 
 * Made by Mehmet Celik (https://www.meceware.com/) 
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).heMenu=t()}(this,(function(){"use strict";return Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),((e,t)=>{if(void 0===e.document)return;const n={menu:".hemenu-menu",trigger:null,title:"Menu",selected:"selected",theme:"light",position:"left"},s=(e,t,n)=>{for(let s=0;s<e.length;s++)t.call(n,e[s])},i=(e,n,s=t)=>{for(;e&&1===e.nodeType&&e!==s;){if(e.matches(n))return e;e=e.parentElement||e.parentNode}return null};class r{constructor(e,r={}){const o=(e,n=t)=>e?"string"==typeof e?n.querySelector(e):e:null;if(Object.keys(n).forEach((e=>{Object.prototype.hasOwnProperty.call(r,e)||(r[e]=n[e])})),this.options=r,this.wrapper=o(e),!this.wrapper)return;if(this.wrapper.heMenu)return;if(s(["hemenu",`hemenu-${this.options.position}`,`hemenu-theme-${this.options.theme}`],(e=>{this.wrapper.classList.add(e)})),this.menu=o(this.options.menu,this.wrapper),this.menu){this.menu.classList.add("hemenu-navbar"),this.menuTitle=t.createElement("div"),this.menuTitle.classList.add("hemenu-menu-title"),this.menu.parentElement.insertBefore(this.menuTitle,this.menu),this.menuTitle.addEventListener("click",(e=>{const t=this.menu.querySelectorAll(".hemenu-menu-parent"),n=t[t.length-1];return!!n&&(this.openPanel(n),e.stopImmediatePropagation(),!0)}).bind(this));(()=>{const e=this.menu.querySelectorAll(`.${this.options.selected}`),t=e[e.length-1];let n=null;t&&(n=i(t,"ul",this.menu)),n||(n=this.menu.querySelector("ul")),this.openPanel(n)}).bind(this)(),s(this.menu.querySelectorAll("ul li"),(e=>{e.querySelector("ul")&&e.classList.add("hemenu-menu-level")})),this.menu.addEventListener("click",(e=>{const t=e.target;if(t.matches("a"))return;let n;n=i(t,"span, div.hemenu-span",this.menu)?t.parentElement:!!i(t,"li",this.menu)&&t,n&&(s(n.children,(e=>{e.matches("ul")&&this.openPanel(e)})),e.stopImmediatePropagation())}).bind(this))}this.wrapper.appendChild(((e=this)=>{const n=t.createElement("div");n.classList.add("hemenu-bg");const s=t=>{e.close(),t.preventDefault(),t.stopImmediatePropagation()};return n.addEventListener("touchstart",s.bind(e)),n.addEventListener("mousedown",s.bind(e)),n})());const u=e=>{e.preventDefault(),this.open()},l=o(this.options.trigger);l&&l.addEventListener("click",u.bind(this)),this.wrapper.heMenu=this,this.wrapper.setAttribute("data-hemenu-initialized",!0)}openPanel(e){let t=this.options.title;s(e.parentElement.children,(e=>{e.matches("a, span, div.hemenu-span")&&(t=e.textContent)})),this.menuTitle.textContent=t,s(e.querySelectorAll(".hemenu-menu-parent"),(e=>{e.classList.remove("hemenu-menu-parent")})),s(e.querySelectorAll(".hemenu-menu-open"),(e=>{e.classList.remove("hemenu-menu-open")})),e.classList.remove("hemenu-menu-parent"),e.classList.add("hemenu-menu-open");let n=e,r=0;do{n=i(n.parentElement,"ul",this.menu),n&&(n.classList.add("hemenu-menu-open"),n.classList.add("hemenu-menu-parent"),r++)}while(n);0!==r?this.menuTitle.classList.add("hemenu-title-back"):this.menuTitle.classList.remove("hemenu-title-back")}open(){this.wrapper.classList.add("hemenu-open"),t.body.classList.add("hemenu-opened")}close(){this.wrapper.classList.remove("hemenu-open"),t.body.classList.remove("hemenu-opened")}destroy(){try{if(!this.wrapper.hasAttribute("data-hemenu-initialized")||"true"!==this.wrapper.getAttribute("data-hemenu-initialized")||!this.wrapper.heMenu)return;t.body.classList.remove("hemenu-opened"),s([`hemenu-${this.options.position}`,`hemenu-theme-${this.options.theme}`,"hemenu-open"],(e=>{this.wrapper.classList.remove(e)})),this.wrapper.querySelector(".hemenu-bg").remove(),this.wrapper.querySelector(".hemenu-menu-title").remove(),this.menu&&(this.menu.classList.remove("hemenu-navbar"),this.menuTitle.remove(),s(this.menu.querySelectorAll(".hemenu-menu-level"),(e=>{e.classList.remove("hemenu-menu-level")})),s(this.menu.querySelectorAll(".hemenu-menu-parent"),(e=>{e.classList.remove("hemenu-menu-parent")})),s(this.menu.querySelectorAll(".hemenu-menu-open"),(e=>{e.classList.remove("hemenu-menu-open")}))),this.wrapper.removeAttribute("data-hemenu-initialized"),delete this.menu.heMenu}catch(e){}}}return r.destroy=()=>{s(t.querySelectorAll("[data-hemenu-initialized]"),(e=>{e.heMenu.destroy()}))},r.scan=()=>{const e=()=>{s(t.querySelectorAll("[data-hemenu]"),(e=>{if(void 0===e.heMenu)try{new r(e,JSON.parse(decodeURIComponent(e.getAttribute("data-hemenu"))))}catch(e){}}))};"loading"!==t.readyState?e():t.addEventListener("DOMContentLoaded",e)},r.scan(),window.heMenu=r,r})("undefined"!=typeof window?window:void 0,document)}));
