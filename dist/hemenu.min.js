/* 
 * heMenu v1.0.5
 * https://github.com/meceware/heMenu 
 * 
 * Made by Mehmet Celik (https://www.meceware.com/) 
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).heMenu=t()}(this,(function(){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1});var e=((e,t)=>{if(void 0===e.document)return;const n={menu:".hemenu-menu",trigger:null,title:"Menu",selected:"selected",theme:"light",position:"left"},i=(e,t,n)=>{for(let i=0;i<e.length;i++)t.call(n,e[i])},s=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;for(;e&&1===e.nodeType&&e!==i;){if(e.matches(n))return e;e=e.parentElement||e.parentNode}return null};class r{constructor(e){var r=this;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=function(e){return e?"string"==typeof e?(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t).querySelector(e):e:null};if(Object.keys(n).forEach((e=>{Object.prototype.hasOwnProperty.call(o,e)||(o[e]=n[e])})),this.options=o,this.wrapper=l(e),!this.wrapper)return;if(this.wrapper.heMenu)return;if(i(["hemenu",`hemenu-${this.options.position}`,`hemenu-theme-${this.options.theme}`],(e=>{this.wrapper.classList.add(e)})),this.menu=l(this.options.menu,this.wrapper),this.menu){this.menu.classList.add("hemenu-navbar"),this.menuTitle=t.createElement("div"),this.menuTitle.classList.add("hemenu-menu-title"),this.menu.parentElement.insertBefore(this.menuTitle,this.menu),this.menuTitle.addEventListener("click",(e=>{const t=this.menu.querySelectorAll(".hemenu-menu-parent"),n=t[t.length-1];return!!n&&(this.openPanel(n),e.stopImmediatePropagation(),!0)}).bind(this));(()=>{const e=this.menu.querySelectorAll(`.${this.options.selected}`),t=e[e.length-1];let n=null;t&&(n=s(t,"ul",this.menu)),n||(n=this.menu.querySelector("ul")),this.openPanel(n)}).bind(this)(),i(this.menu.querySelectorAll("ul li"),(e=>{e.querySelector("ul")&&e.classList.add("hemenu-menu-level")})),this.menu.addEventListener("click",(e=>{const t=e.target;if(t.matches("a"))return;let n;n=s(t,"span, div.hemenu-span",this.menu)?t.parentElement:!!s(t,"li",this.menu)&&t,n&&(i(n.children,(e=>{e.matches("ul")&&this.openPanel(e)})),e.stopImmediatePropagation())}).bind(this))}this.wrapper.appendChild(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;const n=t.createElement("div");n.classList.add("hemenu-bg");const i=t=>{e.close(),t.preventDefault(),t.stopImmediatePropagation()};return n.addEventListener("touchstart",i.bind(e)),n.addEventListener("mousedown",i.bind(e)),n}());const u=e=>{e.preventDefault(),this.open()},h=l(this.options.trigger);h&&h.addEventListener("click",u.bind(this)),this.wrapper.heMenu=this,this.wrapper.setAttribute("data-hemenu-initialized",!0)}openPanel(e){let t=this.options.title;i(e.parentElement.children,(e=>{e.matches("a, span, div.hemenu-span")&&(t=e.textContent)})),this.menuTitle.textContent=t,i(e.querySelectorAll(".hemenu-menu-parent"),(e=>{e.classList.remove("hemenu-menu-parent")})),i(e.querySelectorAll(".hemenu-menu-open"),(e=>{e.classList.remove("hemenu-menu-open")})),e.classList.remove("hemenu-menu-parent"),e.classList.add("hemenu-menu-open");let n=e,r=0;do{n=s(n.parentElement,"ul",this.menu),n&&(n.classList.add("hemenu-menu-open"),n.classList.add("hemenu-menu-parent"),r++)}while(n);0!==r?this.menuTitle.classList.add("hemenu-title-back"):this.menuTitle.classList.remove("hemenu-title-back")}open(){this.wrapper.classList.add("hemenu-open"),t.body.classList.add("hemenu-opened")}close(){this.wrapper.classList.remove("hemenu-open"),t.body.classList.remove("hemenu-opened")}destroy(){try{if(!this.wrapper.hasAttribute("data-hemenu-initialized")||"true"!==this.wrapper.getAttribute("data-hemenu-initialized")||!this.wrapper.heMenu)return;t.body.classList.remove("hemenu-opened"),i([`hemenu-${this.options.position}`,`hemenu-theme-${this.options.theme}`,"hemenu-open"],(e=>{this.wrapper.classList.remove(e)})),this.wrapper.querySelector(".hemenu-bg").remove(),this.wrapper.querySelector(".hemenu-menu-title").remove(),this.menu&&(this.menu.classList.remove("hemenu-navbar"),this.menuTitle.remove(),i(this.menu.querySelectorAll(".hemenu-menu-level"),(e=>{e.classList.remove("hemenu-menu-level")})),i(this.menu.querySelectorAll(".hemenu-menu-parent"),(e=>{e.classList.remove("hemenu-menu-parent")})),i(this.menu.querySelectorAll(".hemenu-menu-open"),(e=>{e.classList.remove("hemenu-menu-open")}))),this.wrapper.removeAttribute("data-hemenu-initialized"),delete this.menu.heMenu}catch(e){}}}return r.destroy=()=>{i(t.querySelectorAll("[data-hemenu-initialized]"),(e=>{e.heMenu.destroy()}))},r.scan=()=>{const e=()=>{i(t.querySelectorAll("[data-hemenu]"),(e=>{if(void 0===e.heMenu)try{new r(e,JSON.parse(decodeURIComponent(e.getAttribute("data-hemenu"))))}catch(e){}}))};"loading"!==t.readyState?e():t.addEventListener("DOMContentLoaded",e)},r.scan(),window.heMenu=r,r})("undefined"!=typeof window?window:void 0,document);return e}));
